var UNIX_TS_MS_BITS = 48;
var VER_DIGIT = "7";
var SEQ_BITS = 12;
var VAR = 2;
var VAR_BITS = 2;
var RAND_BITS = 62;
function uuidv7Builder(getRandomValues) {
  var prevTimestamp = -1;
  var seq = 0;
  return function () {
    // Negative system clock adjustments are ignored to keep monotonicity
    var timestamp = Math.max(Date.now(), prevTimestamp);
    seq = timestamp === prevTimestamp ? seq + 1 : 0;
    prevTimestamp = timestamp;
    var var_rand = new Uint32Array(2);
    getRandomValues(var_rand);
    var_rand[0] = VAR << 32 - VAR_BITS | var_rand[0] >>> VAR_BITS;
    var digits = timestamp.toString(16).padStart(UNIX_TS_MS_BITS / 4, "0") + VER_DIGIT + seq.toString(16).padStart(SEQ_BITS / 4, "0") + var_rand[0].toString(16).padStart((VAR_BITS + RAND_BITS) / 2 / 4, "0") + var_rand[1].toString(16).padStart((VAR_BITS + RAND_BITS) / 2 / 4, "0");
    return digits.slice(0, 8) + "-" + digits.slice(8, 12) + "-" + digits.slice(12, 16) + "-" + digits.slice(16, 20) + "-" + digits.slice(20);
  };
}

var uuidv7 = uuidv7Builder(function (array) {
  return crypto.getRandomValues(array);
});

export { uuidv7 };
